<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>muuntaja.json documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Muuntaja</span> <span class="project-version">0.2.1</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>muuntaja</span></div></div></li><li class="depth-2 branch"><a href="muuntaja.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>format</span></div></div></li><li class="depth-3 branch"><a href="muuntaja.format.edn.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>edn</span></div></a></li><li class="depth-3 branch"><a href="muuntaja.format.json.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>json</span></div></a></li><li class="depth-3 branch"><a href="muuntaja.format.msgpack.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>msgpack</span></div></a></li><li class="depth-3 branch"><a href="muuntaja.format.transit.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>transit</span></div></a></li><li class="depth-3"><a href="muuntaja.format.yaml.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>yaml</span></div></a></li><li class="depth-2 branch"><a href="muuntaja.interceptor.html"><div class="inner"><span class="tree" style="top: -176px;"><span class="top" style="height: 185px;"></span><span class="bottom"></span></span><span>interceptor</span></div></a></li><li class="depth-2 branch current"><a href="muuntaja.json.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>json</span></div></a></li><li class="depth-2 branch"><a href="muuntaja.middleware.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>middleware</span></div></a></li><li class="depth-2 branch"><a href="muuntaja.parse.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>parse</span></div></a></li><li class="depth-2 branch"><a href="muuntaja.protocols.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>protocols</span></div></a></li><li class="depth-2 branch"><a href="muuntaja.records.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>records</span></div></a></li><li class="depth-2"><a href="muuntaja.util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>util</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="muuntaja.json.html#var-.2Bdefault-mapper.2B"><div class="inner"><span>+default-mapper+</span></div></a></li><li class="depth-1"><a href="muuntaja.json.html#var-from-json"><div class="inner"><span>from-json</span></div></a></li><li class="depth-1"><a href="muuntaja.json.html#var-make-mapper"><div class="inner"><span>make-mapper</span></div></a></li><li class="depth-1"><a href="muuntaja.json.html#var-to-json"><div class="inner"><span>to-json</span></div></a></li><li class="depth-1"><a href="muuntaja.json.html#var-write-to"><div class="inner"><span>write-to</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">muuntaja.json</h1><div class="doc"><pre class="plaintext">JSON encoding and decoding based on Jackson Databind.

Encoding example:

  (require '[muuntaja.json :as json])
  (json/to-json {:hello 1})
  ;; =&gt; "{\"hello\":1}"

Decoding example:

  (def +data+ (json/to-json {:foo "bar"}))
  (json/from-json +data+)
  ;; =&gt; {"foo" "bar"}

CONFIGURATION

You can configure encoding and decoding by creating a custom mapper object
with muuntaja.json/make-mapper. The options are passed in as a map.

For example, to convert map keys into keywords while decoding:

  (json/from-json +data+ (json/make-mapper {:keywordize? true}))
  ;; =&gt; {:foo "bar"}

See the docstring of muuntaja.json/make-mapper for all available options.

CUSTOM ENCODERS

Custom encoder is a function that take a value and a JsonGenerator object as
the parameters. The function should call JsonGenerator methods to emit the
desired JSON. This is the same as how custom encoders work in Cheshire.

Custom encoders are configured by the make-mapper option :encoders, which is a
map from types to encoder functions.

For example, to encode java.awt.Color:

   (let [encoders {java.awt.Color (fn [color gen] (.writeString gen (str color)))}
         mapper (json/make-mapper {:encoders encoders})]
     (json/to-json (java.awt.Color. 1 2 3) mapper))
   ;; =&gt; "\"java.awt.Color[r=1,g=2,b=3]\""

MUUNTAJA.JSON VS CHESHIRE

muuntaja.json uses Jackson Databind while Cheshire uses Jackson Core. In our
benchmarks, muuntaja.json performs better than Cheshire (take look at
json_perf_test.clj). On the other hand, Cheshire has a wider set of features
and has been used in production much more.</pre></div><div class="public anchor" id="var-.2Bdefault-mapper.2B"><h3>+default-mapper+</h3><div class="usage"></div><div class="doc"><pre class="plaintext">The default ObjectMapper instance used by muuntaja.json/to-json and
muuntaja.json/from-json unless you pass in a custom one.</pre></div></div><div class="public anchor" id="var-from-json"><h3>from-json</h3><div class="usage"><code>(from-json data)</code><code>(from-json data mapper)</code></div><div class="doc"><pre class="plaintext">Decode a value from a JSON string or InputStream.

To configure, pass in an ObjectMapper created with make-mapper.</pre></div></div><div class="public anchor" id="var-make-mapper"><h3>make-mapper</h3><div class="usage"><code>(make-mapper)</code><code>(make-mapper options)</code></div><div class="doc"><pre class="plaintext">Create an ObjectMapper with Clojure support.

The optional first parameter is a map of options. The following options are
available:

:encoders     --  a map of custom encoders where keys should be types and values
                  should be encoder functions
:keywordize?  --  set to true to convert map keys into keywords (default: false)

Encoder functions take two parameters: the value to be encoded and a
JsonGenerator object. The function should call JsonGenerator methods to emit
the desired JSON.</pre></div></div><div class="public anchor" id="var-to-json"><h3>to-json</h3><div class="usage"><code>(to-json object)</code><code>(to-json object mapper)</code></div><div class="doc"><pre class="plaintext">Encode a value as a JSON string.

To configure, pass in an ObjectMapper created with make-mapper.</pre></div></div><div class="public anchor" id="var-write-to"><h3>write-to</h3><div class="usage"><code>(write-to object writer)</code><code>(write-to object writer mapper)</code></div><div class="doc"><pre class="plaintext"></pre></div></div></div></body></html>